# Feature Specification: 日常管理系统

**Feature Branch**: `001-api`
**Created**: 2025-11-17
**Status**: Draft
**Input**: User description: "日常管理系统，包含日程管理、灵感收集、数据统计等模块，前端已基本完成，后续以完善后端、API 设计、数据模型、接口契约、测试和文档为主。"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 日程管理 (Priority: P1)

用户可以高效地创建、查看、编辑和删除日程事件，支持事件重复、完成状态跟踪、效率评分和自定义事件类型，并通过积分系统激励用户。

**Why this priority**: 日程管理是核心功能，直接影响用户的日常安排和体验，新增的重复事件、完成跟踪和积分系统提升了用户粘性和时间管理效率。

**Independent Test**: 通过添加、修改、删除日程事件并切换不同视图，验证所有操作均可独立完成；测试重复事件生成、完成状态标记、效率评分和积分计算的准确性。

**Acceptance Scenarios**:

1. **Given** 用户点击新建事件按钮，**When** 填写标题、日期、开始时间、类型、紧急程度、重复设置，**Then** 事件应按规则生成并显示在对应日期。
2. **Given** 已有日程事件，**When** 用户双击事件，**Then** 应弹窗允许编辑所有字段并保存更新。
3. **Given** 日历中有事件，**When** 用户勾选完成复选框并填写效率（高/中/低），**Then** 事件标题应添加删除线、显示效率图标，并更新当日积分。
4. **Given** 用户需要自定义事件类型，**When** 添加类型名称和颜色（如"副业"-红色），**Then** 该类型事件应在日历中显示对应颜色。
5. **Given** 日历显示完整一周/月，**When** 用户查看底部积分栏，**Then** 每日积分应准确反映所有已完成事件的效率得分总和。

---

### User Story 2 - 数据统计 (Priority: P2)

用户可以查看日程的统计数据，了解使用习惯和趋势。

**Why this priority**: 数据统计为用户提供反馈，帮助优化时间管理。

**Independent Test**: 通过切换到数据统计页面，验证统计图表能正确反映数据。

**Acceptance Scenarios**:

1. **Given** 用户有历史数据，**When** 进入统计页面，**Then** 应显示日程的统计图表。

---

### Edge Cases

- 日程为空时，界面应有友好提示。
- 添加重复事件时，系统应有去重或合并机制。
- 大量数据时，界面响应和滚动应流畅。
- 农历与公历切换时，日期显示应准确。

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统必须支持日程事件的增删改查（CRUD）。
- **FR-002**: 系统必须支持农历与公历的日期显示。
- **FR-003**: 系统必须支持多视图（日、周、月）切换。
- **FR-004**: 系统必须提供数据统计和可视化。
- **FR-005**: 系统必须支持数据的本地持久化和备份。
- **FR-006**: 系统必须有基础的权限控制和数据隔离。[NEEDS CLARIFICATION: 是否需要多用户/登录功能？]
- **FR-007**: 系统必须保证数据一致性和异常处理。
- **FR-008**: 系统必须支持事件重复功能，包括每天、法定工作日、法定节假日、周一至周五、周末等重复类型，并支持永久重复或指定结束日期。
- **FR-009**: 系统必须支持事件完成状态标记，包括完成确认、效率评分（高/中/低）、完成后的视觉反馈（删除线+效率图标）。
- **FR-010**: 系统必须支持自定义事件类型及颜色配置，用户可添加、编辑、删除事件类型，并为每种类型指定显示颜色。
- **FR-011**: 系统必须实现积分系统，按时间单位（半小时）和效率评分计算每日得分，并在日历底部显示每日积分汇总。积分规则：高效率=2分/半小时，中效率=1分/半小时，低效率=-1分/半小时。

### Key Entities

- **Event（日程事件）**: 包含标题、时间（开始、结束）、描述、类型、紧急程度、是否重复、重复类型、重复结束日期、完成状态、效率评分、农历、公历、提醒设置等属性。
- **EventType（事件类型）**: 包含类型名称、显示颜色等属性，支持用户自定义。
- **DailyScore（每日积分）**: 包含日期、总积分、事件明细等属性，用于积分统计和展示。
- **User（用户）**: [NEEDS CLARIFICATION: 是否支持多用户？如支持需包含用户名、密码、权限等]

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户可在 2 分钟内完成日程的添加。
- **SC-002**: 90% 以上的用户能独立完成主要操作（添加、编辑、删除）。
- **SC-003**: 统计页面能正确反映 100% 的历史数据。
- **SC-004**: 系统在 1000 条日程数据下，页面响应时间 < 1 秒。
- **SC-005**: 用户满意度调查中，80% 以上用户认为系统易用。

## Assumptions

- 默认单用户模式，后续如需多用户可扩展。
- 数据存储采用 MySQL，后端可扩展为云端。
- 前端已完成主要 UI，后端接口需与前端对齐。
